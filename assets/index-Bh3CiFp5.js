import{f as D,g as $}from"./index-BBvuKO6-.js";var c={},v={},j={},P;function E(){if(P)return j;P=1,Object.defineProperty(j,"__esModule",{value:!0}),j.Status=void 0;var o;return function(l){l[l.unload=0]="unload",l[l.loading=1]="loading",l[l.loaded=2]="loaded"}(o||(j.Status=o={})),j}var k;function M(){if(k)return v;k=1;var o=v&&v.__assign||function(){return o=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},o.apply(this,arguments)},l=v&&v.__spreadArray||function(n,e,t){if(t||arguments.length===2)for(var r=0,a=e.length,u;r<a;r++)(u||!(r in e))&&(u||(u=Array.prototype.slice.call(e,0,r)),u[r]=e[r]);return n.concat(u||Array.prototype.slice.call(e))};Object.defineProperty(v,"__esModule",{value:!0});var m=E(),p={hideBeforeLoaded:!0,onUpdate:function(n){}},w=function(){function n(){this.index=0,this.result=[]}return n.prototype.load=function(e,t){var r=this;if(t===void 0&&(t=p),!e)return new Promise(function(i){i({total:0,loaded:0})});var a=o(o({},p),t),u=a.onUpdate,d=a.hideBeforeLoaded,b=this.getStyle(e,"display")==="flex"?"flex":"block";d&&(e.style.display="none");var x=Array.from(e.querySelectorAll("*")),s=l([e],x,!0);s.forEach(function(i,f){var g=i.tagName,O=i.getAttribute("src"),S=r.getStyle(i,"background-image").replace(/url\((['"])?(.*?)\1\)/gi,"$2"),y=r.getStyle(i,"-webkit-mask-image").replace(/url\((['"])?(.*?)\1\)/gi,"$2"),h=m.Status.unload;return g==="IMG"&&O?(r.result.push({url:O,index:f,status:h}),!0):g==="DIV"&&S!=="none"?(S.includes("gradient")||r.result.push({url:S,index:f,status:h}),!0):(g==="DIV"&&y!=="none"&&r.result.push({url:y,index:f,status:h}),!1)});var q=function(i){var f=i.resolve,g=f===void 0?function(_){return console.log(_)}:f,O=i.reject,S=O===void 0?function(_){return console.log(_)}:O;if(r.result.length===0){d&&(e.style.display=b),g({total:0,loaded:0});return}var y=r.result[r.index],h=r.result.length,L=y.url,A=y.index;y.status=m.Status.loading;var I=new Image;I.onload=function(){y.status=m.Status.loaded;var _=r.result.filter(function(C){return C.status===m.Status.loaded}).length;h===_?(d&&(e.style.display=b),requestAnimationFrame(function(){return g({url:L,total:h,loaded:_,index:A})})):(u({url:L,total:h,loaded:_,index:A}),r.index++,q({resolve:g,reject:S}))},I.src=L};return new Promise(function(i,f){q({resolve:i,reject:f})})},n.prototype.getStyle=function(e,t){var r,a=e.ownerDocument.defaultView;return a&&a.getComputedStyle?(t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),a.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle?(t=t.replace(/\-(\w)/g,function(u,d){return d.toUpperCase()}),r=e.currentStyle[t],r):""},n}();return v.default=w,v}var B;function R(){if(B)return c;B=1;var o=c&&c.__assign||function(){return o=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},o.apply(this,arguments)},l=c&&c.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(c,"__esModule",{value:!0});var m=l(M()),p=D(),w=function(n){var e=n.children,t=n.hideBeforeLoaded,r=t===void 0?!0:t,a=n.onStep,u=a===void 0?function(){}:a,d=n.onload,b=d===void 0?function(){}:d,x=(0,p.useRef)();return(0,p.useEffect)(function(){x.current&&new m.default().load(x.current,{hideBeforeLoaded:r,onUpdate:function(s){return u==null?void 0:u(s)}}).then(function(s){b==null||b(s)})},[]),p.Children.map(e,function(s){return(0,p.cloneElement)(s,o(o({},s.props),{ref:x}))})};return c.default=w,c}var U=R();const F=$(U);export{F as O};
